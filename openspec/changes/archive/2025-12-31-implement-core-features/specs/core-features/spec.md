# Spec: 核心业务功能

## Requirements

### Requirement: 菜单数据管理
系统 SHALL 支持菜单数据的导入与持久化存储。

#### Scenario: 导入菜单配置
- **GIVEN** 用户有一个符合格式的 JSON 菜单文件
- **WHEN** 用户选择导入该文件
- **THEN** 系统解析文件内容，更新本地菜单列表，并持久化保存
- **AND** 界面刷新显示新的菜单项

#### Scenario: 持久化加载
- **GIVEN** 用户之前导入过菜单并重启了应用
- **WHEN** 应用启动
- **THEN** 系统自动加载上次保存的菜单配置

### Requirement: 随机推荐与冷却机制
系统 SHALL 根据当前菜单和历史记录，排除冷却期内的条目后，随机推荐一个菜单项。

#### Scenario: 正常随机推荐
- **GIVEN** 菜单中有多个条目，且部分条目处于冷却期（最近吃过）
- **WHEN** 用户点击“随机推荐”
- **THEN** 系统从[总菜单 - 冷却期内条目]的集合中随机选择一项展示
- **AND** 被选中的项不应是最近 N 天（默认3天）内吃过的

#### Scenario: 无候选可用
- **GIVEN** 所有菜单项都处于冷却期，或菜单为空
- **WHEN** 用户点击“随机推荐”
- **THEN** 系统提示“无可选项”，并建议修改冷却设置或清空历史

### Requirement: 历史记录管理
系统 SHALL 记录用户的选择历史，用于支持冷却逻辑及用户回顾。

#### Scenario: 确认选择
- **GIVEN** 系统推荐了一个菜单项
- **WHEN** 用户点击“就吃这个”
- **THEN** 系统将该条目及当前时间写入历史记录
- **AND** 该条目立即进入冷却状态（下次不再推荐）

#### Scenario: 清空历史
- **GIVEN** 存在历史记录
- **WHEN** 用户点击“清空历史”
- **THEN** 所有历史记录被清除
- **AND** 所有菜单项的冷却状态重置（即可被重新推荐）
